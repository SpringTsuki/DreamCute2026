# 清除星宁实体
kill @e[tag=tided_npc_starrymika]

# 星宁盔甲架本体（初次对话，后续移除，为隐形盔甲架）
summon minecraft:armor_stand 957 84 2081 {Tags:[tided_npc_starrymika,tided_npc_starrymika_armor,tided_npc_starrymika_once,tided_npc],Invisible:true,DisabledSlots:16191,NoGravity:true}

# 星宁盔甲架本体
summon minecraft:armor_stand 957 84 2081 {Tags:[tided_npc_starrymika,tided_npc_starrymika_armor,tided_npc],ArmorItems:[{id:"minecraft:leather_boots"},{id:"minecraft:leather_leggings"},{id:"minecraft:leather_chestplate"},{id:"minecraft:player_head",components:{profile:Starry_Mika}}],Invisible:true,DisabledSlots:16191,CustomName:'{"translate":"game.npc.name.starrymika"}',CustomNameVisible:false}

# 星宁隐形交易村民 - 已完工
summon minecraft:villager 957 84 2081 {Tags:["tided_npc_starrymika","tided_npc_starrymika_shop"],NoAI:true,NoGravity:true,Silent:true,Age:10000000,CanPickUpLoot:false,Invulnerable:true,VillagerData:{level:5,profession:"minecraft:toolsmith",type:"minecraft:plains"},CustomName:'{"translate":"game.npc.name.starrymika"}',active_effects:[{id:"minecraft:invisibility",amplifier:1b,duration:-1,show_particles:false}],Offers:{Recipes:[{"buy":{"id":"minecraft:cobblestone","count":30,"components":{"minecraft:custom_name":'{"translate":"game.item.resource.cobblestone"}',"minecraft:lore":['{"translate":"game.item.resource.cobblestone_lore1"}']}},"sell":{"id":"minecraft:iron_ingot","count":1,"components":{"minecraft:custom_name":'{"translate":"game.item.resource.iron_ingot"}',"minecraft:lore":['{"translate":"game.item.resource.iron_ingot_lore1"}']}},"maxUses":9999999},{"buy":{"id":"minecraft:cobblestone","count":5,"components":{"minecraft:custom_name":'{"translate":"game.item.resource.cobblestone"}',"minecraft:lore":['{"translate":"game.item.resource.cobblestone_lore1"}']}},"buyB":{"id":"minecraft:iron_ingot","count":1,"components":{"minecraft:custom_name":'{"translate":"game.item.resource.iron_ingot"}',"minecraft:lore":['{"translate":"game.item.resource.iron_ingot_lore1"}']}},"sell":{"id":"minecraft:shield","count":1,"components":{"minecraft:unbreakable":{},"minecraft:custom_name":'{"translate":"game.item.weapon.iron_shield"}',"minecraft:lore":['{"translate":"game.item.weapon.iron_shield_lore1"}'],"minecraft:attribute_modifiers":{"modifiers":[{"id":"armor","amount":2,"operation":"add_value","type":"generic.armor","slot":"offhand"}]}}},"maxUses":9999999},{"buy":{"id":"minecraft:rotten_flesh","count":10,"components":{"minecraft:custom_name":'{"translate":"game.item.resource.material"}',"minecraft:lore":['{"translate":"game.item.resource.material_lore1"}','{"text":""}','{"translate":"game.item.resource.material_lore2"}','{"translate":"game.item.resource.material_lore3"}','{"translate":"game.item.resource.material_lore4"}']}},"buyB":{"id":"minecraft:cobblestone","count":1,"components":{"minecraft:custom_name":'{"translate":"game.item.resource.cobblestone"}',"minecraft:lore":['{"translate":"game.item.resource.cobblestone_lore1"}']}},"sell":{"id":"minecraft:cooked_beef","count":20,"components":{"minecraft:custom_name":'{"translate":"game.item.resource.food_beef"}',"minecraft:lore":['{"translate":"game.item.resource.food_beef_lore1"}']}},"maxUses":9999999},{"buy":{"id":"minecraft:iron_ingot","count":3,"components":{"minecraft:custom_name":'{"translate":"game.item.resource.iron_ingot"}',"minecraft:lore":['{"translate":"game.item.resource.iron_ingot_lore1"}']}},"buyB":{"id":"minecraft:wooden_sword","count":1,"components":{"minecraft:unbreakable":{},"minecraft:custom_name":'{"translate":"game.item.weapon.wooden_knife"}',"minecraft:lore":['{"translate":"game.item.weapon.wooden_knife_lore1"}'],"minecraft:enchantments":{"levels":{"minecraft:looting":2}},"minecraft:attribute_modifiers":{"modifiers":[{"id":"attack_speed","amount":2.0,"operation":"add_value","type":"minecraft:generic.attack_speed","slot":"mainhand"},{"id":"attack_damage","amount":3.0,"operation":"add_value","type":"minecraft:generic.attack_damage","slot":"mainhand"}]}}},"sell":{"id":"minecraft:iron_sword","count":1,"components":{"minecraft:unbreakable":{},"minecraft:custom_name":'{"translate":"game.item.weapon.iron_knife"}',"minecraft:lore":['{"translate":"game.item.weapon.iron_knife_lore1"}'],"minecraft:attribute_modifiers":{"modifiers":[{"id":"attack_speed","amount":2,"operation":"add_value","type":"generic.attack_speed","slot":"mainhand"},{"id":"attack_damage","amount":5,"operation":"add_value","type":"generic.attack_damage","slot":"mainhand"}]},"minecraft:enchantments":{"levels":{"minecraft:looting":2,"minecraft:sharpness":1}}}},"maxUses":9999999},{"buy":{"id":"minecraft:iron_ingot","count":3,"components":{"minecraft:custom_name":'{"translate":"game.item.resource.iron_ingot"}',"minecraft:lore":['{"translate":"game.item.resource.iron_ingot_lore1"}']}},"buyB":{"id":"minecraft:stone_sword","count":1,"components":{"minecraft:unbreakable":{},"minecraft:custom_name":'{"translate":"game.item.weapon.stone_sword"}',"minecraft:lore":['{"translate":"game.item.weapon.stone_sword_lore1"}'],"minecraft:enchantments":{"levels":{"minecraft:sharpness":2}}}},"sell":{"id":"minecraft:iron_sword","count":1,"components":{"minecraft:unbreakable":{},"minecraft:custom_name":'{"translate":"game.item.weapon.iron_sword"}',"minecraft:lore":['{"translate":"game.item.weapon.iron_sword_lore1"}'],"minecraft:enchantments":{"levels":{"minecraft:sharpness":2}}}},"maxUses":9999999},{"buy":{"id":"minecraft:iron_ingot","count":3,"components":{"minecraft:custom_name":'{"translate":"game.item.resource.iron_ingot"}',"minecraft:lore":['{"translate":"game.item.resource.iron_ingot_lore1"}']}},"buyB":{"id":"minecraft:bow","count":1,"components":{"minecraft:unbreakable":{},"minecraft:custom_name":'{"translate":"game.item.weapon.basic_bow"}',"minecraft:lore":['{"translate":"game.item.weapon.basic_bow_lore1"}'],"minecraft:enchantments":{"levels":{"minecraft:power":1}}}},"sell":{"id":"minecraft:bow","count":1,"components":{"minecraft:unbreakable":{},"minecraft:custom_name":'{"translate":"game.item.weapon.iron_bow"}',"minecraft:lore":['{"translate":"game.item.weapon.iron_bow_lore1"}'],"minecraft:enchantments":{"levels":{"minecraft:power":2,"minecraft:knockback":1}},"minecraft:attribute_modifiers":{"modifiers":[{"id":"move_speed","amount":0.1,"operation":"add_multiplied_base","type":"generic.movement_speed","slot":"mainhand"}]}}},"maxUses":9999999},{"buy":{"id":"minecraft:cobblestone","count":1,"components":{"minecraft:custom_name":'{"translate":"game.item.resource.cobblestone"}',"minecraft:lore":['{"translate":"game.item.resource.cobblestone_lore1"}']}},"sell":{"id":"minecraft:arrow","count":32,"components":{"minecraft:custom_name":'{"translate":"game.item.weapon.arrow"}',"minecraft:lore":['{"translate":"game.item.weapon.arrow_lore1"}']}},"maxUses":9999999},{"buy":{"id":"minecraft:iron_ingot","count":1,"components":{"minecraft:custom_name":'{"translate":"game.item.resource.iron_ingot"}',"minecraft:lore":['{"translate":"game.item.resource.iron_ingot_lore1"}']}},"buyB":{"id":"minecraft:leather_helmet","count":1,"components":{"minecraft:unbreakable":{},"minecraft:custom_name":'{"translate":"game.item.armor.cobblestone_helmet"}',"minecraft:lore":['{"translate":"game.item.armor.cobblestone_helmet_lore1"}'],"minecraft:enchantments":{"levels":{"minecraft:protection":1}}}},"sell":{"id":"minecraft:iron_helmet","count":1,"components":{"minecraft:unbreakable":{},"minecraft:custom_name":'{"translate":"game.item.armor.iron_helmet"}',"minecraft:lore":['{"translate":"game.item.armor.iron_helmet_lore1"}'],"minecraft:enchantments":{"levels":{"minecraft:protection":2}}}},"maxUses":9999999},{"buy":{"id":"minecraft:iron_ingot","count":3,"components":{"minecraft:custom_name":'{"translate":"game.item.resource.iron_ingot"}',"minecraft:lore":['{"translate":"game.item.resource.iron_ingot_lore1"}']}},"buyB":{"id":"minecraft:leather_chestplate","count":1,"components":{"minecraft:unbreakable":{},"minecraft:custom_name":'{"translate":"game.item.armor.cobblestone_chestplate"}',"minecraft:lore":['{"translate":"game.item.armor.cobblestone_chestplate_lore1"}'],"minecraft:enchantments":{"levels":{"minecraft:protection":1}}}},"sell":{"id":"minecraft:iron_chestplate","count":1,"components":{"minecraft:unbreakable":{},"minecraft:custom_name":'{"translate":"game.item.armor.iron_chestplate"}',"minecraft:lore":['{"translate":"game.item.armor.iron_chestplate_lore1"}'],"minecraft:enchantments":{"levels":{"minecraft:protection":2}}}},"maxUses":9999999},{"buy":{"id":"minecraft:iron_ingot","count":2,"components":{"minecraft:custom_name":'{"translate":"game.item.resource.iron_ingot"}',"minecraft:lore":['{"translate":"game.item.resource.iron_ingot_lore1"}']}},"buyB":{"id":"minecraft:leather_leggings","count":1,"components":{"minecraft:unbreakable":{},"minecraft:custom_name":'{"translate":"game.item.armor.cobblestone_leggings"}',"minecraft:lore":['{"translate":"game.item.armor.cobblestone_leggings_lore1"}'],"minecraft:enchantments":{"levels":{"minecraft:protection":1}}}},"sell":{"id":"minecraft:iron_leggings","count":1,"components":{"minecraft:unbreakable":{},"minecraft:custom_name":'{"translate":"game.item.armor.iron_leggings"}',"minecraft:lore":['{"translate":"game.item.armor.iron_leggings_lore1"}'],"minecraft:enchantments":{"levels":{"minecraft:protection":2}}}},"maxUses":9999999},{"buy":{"id":"minecraft:iron_ingot","count":1,"components":{"minecraft:custom_name":'{"translate":"game.item.resource.iron_ingot"}',"minecraft:lore":['{"translate":"game.item.resource.iron_ingot_lore1"}']}},"buyB":{"id":"minecraft:leather_boots","count":1,"components":{"minecraft:unbreakable":{},"minecraft:unbreakable":{},"minecraft:custom_name":'{"translate":"game.item.armor.cobblestone_boots"}',"minecraft:lore":['{"translate":"game.item.armor.cobblestone_boots_lore1"}'],"minecraft:enchantments":{"levels":{"minecraft:protection":1}}}},"sell":{"id":"minecraft:iron_boots","count":1,"components":{"minecraft:custom_name":'{"translate":"game.item.armor.iron_boots"}',"minecraft:lore":['{"translate":"game.item.armor.iron_boots_lore1"}'],unbreakable:{},"minecraft:enchantments":{"levels":{"minecraft:protection":2}}}},"maxUses":9999999}]}}

# 触发函数
# function tide_redemption:npc/starrymika/init_npc