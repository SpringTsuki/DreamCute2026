# 清除袁叶实体
kill @e[tag=tided_npc_yuanye]

# 袁叶盔甲架本体
summon minecraft:armor_stand 988 81 2086 {Tags:[tided_npc_yuanye,tided_npc_yuanye_armor,tided_npc],ArmorItems:[{id:"minecraft:leather_boots"},{id:"minecraft:leather_leggings"},{id:"minecraft:leather_chestplate"},{id:"minecraft:player_head",components:{profile:Yuan_Ye}}],Invisible:true,DisabledSlots:16191,CustomName:'{"translate":"game.npc.name.yuanye"}',CustomNameVisible:false}

# 袁叶剧情介绍 - 仅触发一次
summon minecraft:armor_stand 988 81 2086 {Tags:[tided_npc_yuanye,tided_npc_yuanye_once],Invisible:true,NoGravity:true}

# 袁叶隐形交易村民 - 已完工
summon villager 988 81 2086 {Tags:["tided_npc_yuanye","tided_npc_yuanye_shop"],NoAI:1b,Silent:1b,Age:10000000,CanPickUpLoot:false,Invulnerable:true,VillagerData:{level:5,profession:"minecraft:cleric",type:"minecraft:plains"},active_effects:[{id:"minecraft:invisibility",amplifier:1,duration:-1,show_particles:false}],CustomName:'{"translate":"game.npc.name.yuanye"}',Offers:{Recipes:[{buy:{id:"minecraft:cobblestone",count:30,components:{"minecraft:custom_name":'{"translate":"game.item.resource.cobblestone"}',"minecraft:lore":['{"translate":"game.item.resource.cobblestone_lore1"}']}},buyB:{id:"minecraft:iron_ingot",count:10,components:{"minecraft:custom_name":'{"translate":"game.item.resource.iron_ingot"}',"minecraft:lore":['{"translate":"game.item.resource.iron_ingot_lore1"}']}},sell:{id:"minecraft:netherite_upgrade_smithing_template",count:1,components:{"minecraft:custom_name":'{"translate":"game.item.resource.netherite_module"}',"minecraft:lore":['{"translate":"game.item.resource.netherite_module_lore1"}'],"minecraft:rarity":"epic"}},maxUses:9999999,rewardExp:false,demand:0,specialPrice:0,priceMultiplier:0.0f},{buy:{id:"minecraft:netherite_upgrade_smithing_template",count:1,components:{"minecraft:custom_name":'{"translate":"game.item.resource.netherite_module"}',"minecraft:lore":['{"translate":"game.item.resource.netherite_module_lore1"}'],"minecraft:rarity":"epic"}},buyB:{id:"minecraft:diamond",count:10,components:{"minecraft:custom_name":'{"translate":"game.item.resource.diamond"}',"minecraft:lore":['{"translate":"game.item.resource.diamond_lore1"}'],"minecraft:rarity":"rare"}},sell:{id:"minecraft:netherite_ingot",count:1,components:{"minecraft:custom_name":'{"translate":"game.item.resource.netherite_ingot"}',"minecraft:lore":['{"translate":"game.item.resource.netherite_ingot_lore1"}'],"minecraft:rarity":"epic"}},maxUses:9999999,rewardExp:false,demand:0,specialPrice:0,priceMultiplier:0.0f},{buy:{id:"minecraft:blaze_powder",count:20,components:{"minecraft:custom_name":'{"translate":"game.item.resource.blaze_powder"}',"minecraft:lore":['{"translate":"game.item.resource.blaze_powder_lore1"}']}},buyB:{id:"minecraft:bone",count:20,components:{"minecraft:custom_name":'{"translate":"game.item.resource.bone"}',"minecraft:lore":['{"translate":"game.item.resource.bone_lore1"}']}},sell:{id:"minecraft:potion",count:1,components:{"minecraft:custom_name":'{"translate":"game.item.potion.fire_resistance"}',"minecraft:lore":['{"translate":"game.item.potion.fire_resistance_lore1"}'],"minecraft:potion_contents":{"custom_effects":[{"id":"minecraft:fire_resistance","duration":600,"amplifier":0}]},"minecraft:max_stack_size":64}},maxUses:9999999,rewardExp:false,demand:0,specialPrice:0,priceMultiplier:0.0f},{buy:{id:"minecraft:cobblestone",count:10,components:{"minecraft:custom_name":'{"translate":"game.item.resource.cobblestone"}',"minecraft:lore":['{"translate":"game.item.resource.cobblestone_lore1"}']}},buyB:{id:"minecraft:blaze_powder",count:10,components:{"minecraft:custom_name":'{"translate":"game.item.resource.blaze_powder"}',"minecraft:lore":['{"translate":"game.item.resource.blaze_powder_lore1"}']}},sell:{id:"minecraft:potion",count:16,components:{"minecraft:custom_name":'{"translate":"game.item.potion.health.1"}',"minecraft:lore":['{"translate":"game.item.potion.health.1_lore1"}'],"minecraft:potion_contents":{"custom_effects":[{"id":"minecraft:instant_health","amplifier":0}]},"minecraft:max_stack_size":64,"minecraft:rarity":"common"}},maxUses:9999999,rewardExp:false,demand:0,specialPrice:0,priceMultiplier:0.0f},{buy:{id:"minecraft:cobblestone",count:20,components:{"minecraft:custom_name":'{"translate":"game.item.resource.cobblestone"}',"minecraft:lore":['{"translate":"game.item.resource.cobblestone_lore1"}']}},buyB:{id:"minecraft:blaze_powder",count:20,components:{"minecraft:custom_name":'{"translate":"game.item.resource.blaze_powder"}',"minecraft:lore":['{"translate":"game.item.resource.blaze_powder_lore1"}']}},sell:{id:"minecraft:potion",count:8,components:{"minecraft:custom_name":'{"translate":"game.item.potion.health.2"}',"minecraft:lore":['{"translate":"game.item.potion.health.2_lore1"}'],"minecraft:potion_contents":{"custom_effects":[{"id":"minecraft:instant_health","amplifier":1}]},"minecraft:max_stack_size":64,"minecraft:rarity":"uncommon"}},maxUses:9999999,rewardExp:false,demand:0,specialPrice:0,priceMultiplier:0.0f},{buy:{id:"minecraft:cobblestone",count:60,components:{"minecraft:custom_name":'{"translate":"game.item.resource.cobblestone"}',"minecraft:lore":['{"translate":"game.item.resource.cobblestone_lore1"}']}},buyB:{id:"minecraft:blaze_powder",count:60,components:{"minecraft:custom_name":'{"translate":"game.item.resource.blaze_powder"}',"minecraft:lore":['{"translate":"game.item.resource.blaze_powder_lore1"}']}},sell:{id:"minecraft:potion",count:4,components:{"minecraft:custom_name":'{"translate":"game.item.potion.health.3"}',"minecraft:lore":['{"translate":"game.item.potion.health.3_lore1"}'],"minecraft:potion_contents":{"custom_effects":[{"id":"minecraft:instant_health","amplifier":2}]},"minecraft:max_stack_size":64,"minecraft:rarity":"epic"}},maxUses:9999999,rewardExp:false,demand:0,specialPrice:0,priceMultiplier:0.0f},{buy:{id:"minecraft:cobblestone",count:10,components:{"minecraft:custom_name":'{"translate":"game.item.resource.cobblestone"}',"minecraft:lore":['{"translate":"game.item.resource.cobblestone_lore1"}']}},buyB:{id:"minecraft:bone",count:5,components:{"minecraft:custom_name":'{"translate":"game.item.resource.bone"}',"minecraft:lore":['{"translate":"game.item.resource.bone_lore1"}']}},sell:{id:"minecraft:potion",count:1,components:{"minecraft:custom_name":'{"translate":"game.item.potion.strength.1"}',"minecraft:lore":['{"translate":"game.item.potion.strength.1_lore1"}'],"minecraft:potion_contents":{"custom_effects":[{"id":"minecraft:strength","duration":12000,"amplifier":0}]},"minecraft:max_stack_size":64,"minecraft:rarity":"common"}},maxUses:9999999,rewardExp:false,demand:0,specialPrice:0,priceMultiplier:0.0f},{buy:{id:"minecraft:cobblestone",count:10,components:{"minecraft:custom_name":'{"translate":"game.item.resource.cobblestone"}',"minecraft:lore":['{"translate":"game.item.resource.cobblestone_lore1"}']}},buyB:{id:"minecraft:bone",count:10,components:{"minecraft:custom_name":'{"translate":"game.item.resource.bone"}',"minecraft:lore":['{"translate":"game.item.resource.bone_lore1"}']}},sell:{id:"minecraft:potion",count:1,components:{"minecraft:custom_name":'{"translate":"game.item.potion.strength.2"}',"minecraft:lore":['{"translate":"game.item.potion.strength.2_lore1"}'],"minecraft:potion_contents":{"custom_effects":[{"id":"minecraft:strength","duration":1200,"amplifier":1}]},"minecraft:max_stack_size":64,"minecraft:rarity":"uncommon"}},maxUses:9999999,rewardExp:false,demand:0,specialPrice:0,priceMultiplier:0.0f},{buy:{id:"minecraft:cobblestone",count:20,components:{"minecraft:custom_name":'{"translate":"game.item.resource.cobblestone"}',"minecraft:lore":['{"translate":"game.item.resource.cobblestone_lore1"}']}},buyB:{id:"minecraft:bone",count:30,components:{"minecraft:custom_name":'{"translate":"game.item.resource.bone"}',"minecraft:lore":['{"translate":"game.item.resource.bone_lore1"}']}},sell:{id:"minecraft:potion",count:1,components:{"minecraft:custom_name":'{"translate":"game.item.potion.strength.3"}',"minecraft:lore":['{"translate":"game.item.potion.strength.3_lore1"}'],"minecraft:potion_contents":{"custom_effects":[{"id":"minecraft:strength","duration":400,"amplifier":2}]},"minecraft:max_stack_size":64,"minecraft:rarity":"epic"}},maxUses:9999999,rewardExp:false,demand:0,specialPrice:0,priceMultiplier:0.0f},{buy:{id:"minecraft:cobblestone",count:10,components:{"minecraft:custom_name":'{"translate":"game.item.resource.cobblestone"}',"minecraft:lore":['{"translate":"game.item.resource.cobblestone_lore1"}']}},buyB:{id:"minecraft:blaze_powder",count:5,components:{"minecraft:custom_name":'{"translate":"game.item.resource.blaze_powder"}',"minecraft:lore":['{"translate":"game.item.resource.blaze_powder_lore1"}']}},sell:{id:"minecraft:potion",count:1,components:{"minecraft:custom_name":'{"translate":"game.item.potion.recovery.1"}',"minecraft:lore":['{"translate":"game.item.potion.recovery.1_lore1"}'],"minecraft:potion_contents":{"custom_effects":[{"id":"minecraft:regeneration","duration":12000,"amplifier":0}]},"minecraft:max_stack_size":64,"minecraft:rarity":"common"}},maxUses:9999999,rewardExp:false,demand:0,specialPrice:0,priceMultiplier:0.0f},{buy:{id:"minecraft:cobblestone",count:10,components:{"minecraft:custom_name":'{"translate":"game.item.resource.cobblestone"}',"minecraft:lore":['{"translate":"game.item.resource.cobblestone_lore1"}']}},buyB:{id:"minecraft:blaze_powder",count:10,components:{"minecraft:custom_name":'{"translate":"game.item.resource.blaze_powder"}',"minecraft:lore":['{"translate":"game.item.resource.blaze_powder_lore1"}']}},sell:{id:"minecraft:potion",count:1,components:{"minecraft:custom_name":'{"translate":"game.item.potion.recovery.2"}',"minecraft:lore":['{"translate":"game.item.potion.recovery.2_lore1"}'],"minecraft:potion_contents":{"custom_effects":[{"id":"minecraft:regeneration","duration":24000,"amplifier":0}]},"minecraft:max_stack_size":64,"minecraft:rarity":"uncommon"}},maxUses:9999999,rewardExp:false,demand:0,specialPrice:0,priceMultiplier:0.0f},{buy:{id:"minecraft:cobblestone",count:20,components:{"minecraft:custom_name":'{"translate":"game.item.resource.cobblestone"}',"minecraft:lore":['{"translate":"game.item.resource.cobblestone_lore1"}']}},buyB:{id:"minecraft:blaze_powder",count:15,components:{"minecraft:custom_name":'{"translate":"game.item.resource.blaze_powder"}',"minecraft:lore":['{"translate":"game.item.resource.blaze_powder_lore1"}']}},sell:{id:"minecraft:potion",count:1,components:{"minecraft:custom_name":'{"translate":"game.item.potion.recovery.3"}',"minecraft:lore":['{"translate":"game.item.potion.recovery.3_lore1"}'],"minecraft:potion_contents":{"custom_effects":[{"id":"minecraft:regeneration","duration":36000,"amplifier":0}]},"minecraft:max_stack_size":64,"minecraft:rarity":"epic"}},maxUses:9999999,rewardExp:false,demand:0,specialPrice:0,priceMultiplier:0.0f},{buy:{id:"minecraft:diamond",count:3,components:{"minecraft:custom_name":'{"translate":"game.item.resource.diamond"}',"minecraft:lore":['{"translate":"game.item.resource.diamond_lore1"}'],"minecraft:rarity":"rare"}},buyB:{id:"minecraft:bone",count:30,components:{"minecraft:custom_name":'{"translate":"game.item.resource.bone"}',"minecraft:lore":['{"translate":"game.item.resource.bone_lore1"}']}},sell:{id:"minecraft:potion",count:1,components:{"minecraft:custom_name":'{"translate":"game.item.potion.defend"}',"minecraft:lore":['{"translate":"game.item.potion.defend_lore1"}'],"minecraft:potion_contents":{"custom_effects":[{"id":"minecraft:resistance","duration":24000,"amplifier":0}]},"minecraft:max_stack_size":64,"minecraft:rarity":"epic"}},maxUses:9999999,rewardExp:false,demand:0,specialPrice:0,priceMultiplier:0.0f},{buy:{id:"minecraft:rotten_flesh",count:5,components:{"minecraft:custom_name":'{"translate":"game.item.resource.material"}',"minecraft:lore":['{"translate":"game.item.resource.material_lore1"}','{"text":""}','{"translate":"game.item.resource.material_lore2"}','{"translate":"game.item.resource.material_lore3"}','{"translate":"game.item.resource.material_lore4"}']}},buyB:{id:"minecraft:cobblestone",count:5,components:{"minecraft:custom_name":'{"translate":"game.item.resource.cobblestone"}',"minecraft:lore":['{"translate":"game.item.resource.cobblestone_lore1"}']}},sell:{id:"minecraft:golden_apple",count:1,components:{"minecraft:custom_name":'{"translate":"game.item.potion.goldenapple"}',"minecraft:lore":['{"translate":"game.item.potion.goldenapple_lore1"}']}},maxUses:9999999,rewardExp:false,demand:0,specialPrice:0,priceMultiplier:0.0f}]}}

# 袁叶剧情提示 - 仅触发一次
summon minecraft:armor_stand 989 81 2091 {Tags:[tided_npc_yuanye,tided_npc_yuanye_tip],Invisible:true,NoGravity:true}

# 触发函数
# function tide_redemption:npc/yuanye/init_npc